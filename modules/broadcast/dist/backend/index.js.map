{"version":3,"sources":["index.ts"],"names":["db","onServerStarted","bp","BroadcastDb","initialize","onServerReady","onBotMount","botId","entryPoint","translations","en","fr","definition","name","menuIcon","menuText","fullName","homepage"],"mappings":";;;;;;;AAAA;;AAGA;;AACA;;AAEA;;AACA;;AACA;;;;AAEA,IAAIA,EAAJ;;AAEA,MAAMC,eAAe,GAAG,MAAOC,EAAP,IAA0B;AAChDF,EAAAA,EAAE,GAAG,IAAIG,WAAJ,CAAgBD,EAAhB,CAAL;AACA,QAAMF,EAAE,CAACI,UAAH,EAAN;AACD,CAHD;;AAKA,MAAMC,aAAa,GAAG,MAAOH,EAAP,IAA0B;AAC9C,QAAM,kBAAIA,EAAJ,EAAQF,EAAR,CAAN;AACD,CAFD;;AAIA,MAAMM,UAAU,GAAG,OAAOJ,EAAP,EAAuBK,KAAvB,KAAyC;AAC1D,QAAM,qBAAOA,KAAP,EAAcL,EAAd,EAAkBF,EAAlB,CAAN;AACD,CAFD;;AAIA,MAAMQ,UAAgC,GAAG;AACvCP,EAAAA,eADuC;AAEvCI,EAAAA,aAFuC;AAGvCC,EAAAA,UAHuC;AAIvCG,EAAAA,YAAY,EAAE;AAAEC,IAAAA,EAAE,EAAFA,WAAF;AAAMC,IAAAA,EAAE,EAAFA;AAAN,GAJyB;AAKvCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE,WADI;AAEVC,IAAAA,QAAQ,EAAE,wBAFA;AAGVC,IAAAA,QAAQ,EAAE,WAHA;AAIVC,IAAAA,QAAQ,EAAE,WAJA;AAKVC,IAAAA,QAAQ,EAAE;AALA;AAL2B,CAAzC;eAceT,U","sourceRoot":"/mnt/Documents/Projets/BotPress/botpress/modules/broadcast/src/backend","sourcesContent":["import 'bluebird-global'\nimport * as sdk from 'botpress/sdk'\n\nimport en from '../translations/en.json'\nimport fr from '../translations/fr.json'\n\nimport api from './api'\nimport Daemon from './daemon'\nimport BroadcastDb from './db'\n\nlet db\n\nconst onServerStarted = async (bp: typeof sdk) => {\n  db = new BroadcastDb(bp)\n  await db.initialize()\n}\n\nconst onServerReady = async (bp: typeof sdk) => {\n  await api(bp, db)\n}\n\nconst onBotMount = async (bp: typeof sdk, botId: string) => {\n  await Daemon(botId, bp, db)\n}\n\nconst entryPoint: sdk.ModuleEntryPoint = {\n  onServerStarted,\n  onServerReady,\n  onBotMount,\n  translations: { en, fr },\n  definition: {\n    name: 'broadcast',\n    menuIcon: 'settings_input_antenna',\n    menuText: 'Broadcast',\n    fullName: 'Broadcast',\n    homepage: 'https://botpress.com'\n  }\n}\n\nexport default entryPoint\n"]}