{"version":3,"sources":["index.ts"],"names":["bots","onServerStarted","bp","onServerReady","onBotMount","botId","onBotUnmount","onModuleUnmount","events","removeMiddleware","http","deleteRouterForBot","entryPoint","definition","name","menuIcon","menuText","fullName","homepage"],"mappings":";;;;;;;AAGA;;AAEA;;;;AAEA,MAAMA,IAAgB,GAAG,EAAzB;;AAEA,MAAMC,eAAe,GAAG,MAAOC,EAAP,IAA0B;AAChD,QAAM,uBAAWA,EAAX,EAAeF,IAAf,CAAN;AACD,CAFD;;AAIA,MAAMG,aAAa,GAAG,MAAOD,EAAP,IAA0B;AAC9C,QAAM,kBAAIA,EAAJ,EAAQF,IAAR,CAAN;AACD,CAFD;;AAIA,MAAMI,UAAU,GAAG,OAAOF,EAAP,EAAuBG,KAAvB,KAAyC;AAC1D,QAAM,oBAAQH,EAAR,EAAYG,KAAZ,EAAmBL,IAAnB,CAAN;AACD,CAFD;;AAIA,MAAMM,YAAY,GAAG,OAAOJ,EAAP,EAAuBG,KAAvB,KAAyC;AAC5D,SAAOL,IAAI,CAACK,KAAD,CAAX;AACD,CAFD;;AAIA,MAAME,eAAe,GAAG,MAAOL,EAAP,IAA0B;AAChDA,EAAAA,EAAE,CAACM,MAAH,CAAUC,gBAAV,CAA2B,aAA3B;AACAP,EAAAA,EAAE,CAACQ,IAAH,CAAQC,kBAAR,CAA2B,IAA3B;AACD,CAHD;;AAKA,MAAMC,UAAgC,GAAG;AACvCX,EAAAA,eADuC;AAEvCE,EAAAA,aAFuC;AAGvCC,EAAAA,UAHuC;AAIvCE,EAAAA,YAJuC;AAKvCC,EAAAA,eALuC;AAMvC;AACAM,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE,IADI;AAEVC,IAAAA,QAAQ,EAAE,iBAFA;AAGVC,IAAAA,QAAQ,EAAE,gBAHA;AAIVC,IAAAA,QAAQ,EAAE,IAJA;AAKVC,IAAAA,QAAQ,EAAE;AALA;AAP2B,CAAzC;eAgBeN,U","sourceRoot":"/mnt/Documents/Projets/BotPress/botpress/modules/kb/src/backend","sourcesContent":["import * as sdk from 'botpress/sdk'\nimport _ from 'lodash'\n\nimport api from './api'\nimport { ScopedBots } from './typings'\nimport { initBot, initModule } from './setup'\n\nconst bots: ScopedBots = {}\n\nconst onServerStarted = async (bp: typeof sdk) => {\n  await initModule(bp, bots)\n}\n\nconst onServerReady = async (bp: typeof sdk) => {\n  await api(bp, bots)\n}\n\nconst onBotMount = async (bp: typeof sdk, botId: string) => {\n  await initBot(bp, botId, bots)\n}\n\nconst onBotUnmount = async (bp: typeof sdk, botId: string) => {\n  delete bots[botId]\n}\n\nconst onModuleUnmount = async (bp: typeof sdk) => {\n  bp.events.removeMiddleware('kb.incoming')\n  bp.http.deleteRouterForBot('kb')\n}\n\nconst entryPoint: sdk.ModuleEntryPoint = {\n  onServerStarted,\n  onServerReady,\n  onBotMount,\n  onBotUnmount,\n  onModuleUnmount,\n  // translations: { en, fr },\n  definition: {\n    name: 'kb',\n    menuIcon: 'question_answer',\n    menuText: 'Knowledge Base',\n    fullName: 'KB',\n    homepage: 'https://botpress.com'\n  }\n}\n\nexport default entryPoint\n"]}