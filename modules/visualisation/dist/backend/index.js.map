{"version":3,"sources":["index.ts"],"names":["state","embedder","undefined","axiosConfig","predictor","botId","ghost","trainDatas","testDatas","language","onServerStarted","bp_sdk","logger","warn","onServerReady","onBotMount","onModuleUnmount","events","removeMiddleware","http","deleteRouterForBot","entryPoint","translations","en","fr","definition","name","menuIcon","menuText","fullName","homepage","experimental"],"mappings":";;;;;;;AAAA;;AAIA;;AACA;;AACA;;AAEA;;;;AAGA,MAAMA,KAAgB,GAAG;AACvBC,EAAAA,QAAQ,EAAEC,SADa;AAEvBC,EAAAA,WAAW,EAAED,SAFU;AAGvBE,EAAAA,SAAS,EAAEF,SAHY;AAIvBG,EAAAA,KAAK,EAAEH,SAJgB;AAKvBI,EAAAA,KAAK,EAAEJ,SALgB;AAMvBK,EAAAA,UAAU,EAAEL,SANW;AAOvBM,EAAAA,SAAS,EAAEN,SAPY;AAQvBO,EAAAA,QAAQ,EAAEP;AARa,CAAzB;;AAWA,MAAMQ,eAAe,GAAG,MAAOC,MAAP,IAA8B;AACpDA,EAAAA,MAAM,CAACC,MAAP,CAAcC,IAAd,CACE,0GADF;AAGD,CAJD;;AAMA,MAAMC,aAAa,GAAG,MAAOH,MAAP,IAA8B;AAClD,QAAM,kBAAIA,MAAJ,EAAYX,KAAZ,CAAN;AACD,CAFD;;AAIA,MAAMe,UAAU,GAAG,iCAAcf,KAAd,CAAnB;;AAEA,MAAMgB,eAAe,GAAG,MAAOL,MAAP,IAA8B;AACpDA,EAAAA,MAAM,CAACM,MAAP,CAAcC,gBAAd,CAA+B,wBAA/B;AACAP,EAAAA,MAAM,CAACQ,IAAP,CAAYC,kBAAZ,CAA+B,eAA/B;AACD,CAHD;;AAKA,MAAMC,UAAgC,GAAG;AACvCX,EAAAA,eADuC;AAEvCI,EAAAA,aAFuC;AAGvCC,EAAAA,UAHuC;AAIvCC,EAAAA,eAJuC;AAKvCM,EAAAA,YAAY,EAAE;AAAEC,IAAAA,EAAE,EAAFA,WAAF;AAAMC,IAAAA,EAAE,EAAFA;AAAN,GALyB;AAMvCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE,eADI;AAEVC,IAAAA,QAAQ,EAAE,YAFA;AAGVC,IAAAA,QAAQ,EAAE,eAHA;AAIVC,IAAAA,QAAQ,EAAE,eAJA;AAKVC,IAAAA,QAAQ,EAAE,sBALA;AAMVC,IAAAA,YAAY,EAAE;AANJ;AAN2B,CAAzC;eAeeV,U,EAEf","sourceRoot":"/mnt/Documents/Projets/BotPress/botpress/modules/visualisation/src/backend","sourcesContent":["import 'bluebird-global'\nimport * as sdk from 'botpress/sdk'\nimport _ from 'lodash'\n\nimport { getOnBotMount } from '../module_lifecycle/on_bot_mount'\nimport en from '../translations/en.json'\nimport fr from '../translations/fr.json'\n\nimport api from './api'\nimport { VisuState } from './typings'\n\nconst state: VisuState = {\n  embedder: undefined,\n  axiosConfig: undefined,\n  predictor: undefined,\n  botId: undefined,\n  ghost: undefined,\n  trainDatas: undefined,\n  testDatas: undefined,\n  language: undefined\n}\n\nconst onServerStarted = async (bp_sdk: typeof sdk) => {\n  bp_sdk.logger.warn(\n    'You are using Botpress New QNA module which is meant to be tested and released only by the botpress team'\n  )\n}\n\nconst onServerReady = async (bp_sdk: typeof sdk) => {\n  await api(bp_sdk, state)\n}\n\nconst onBotMount = getOnBotMount(state)\n\nconst onModuleUnmount = async (bp_sdk: typeof sdk) => {\n  bp_sdk.events.removeMiddleware('visualisation.incoming')\n  bp_sdk.http.deleteRouterForBot('visualisation')\n}\n\nconst entryPoint: sdk.ModuleEntryPoint = {\n  onServerStarted,\n  onServerReady,\n  onBotMount,\n  onModuleUnmount,\n  translations: { en, fr },\n  definition: {\n    name: 'visualisation',\n    menuIcon: 'assessment',\n    menuText: 'Visualisation',\n    fullName: 'Visualisation',\n    homepage: 'https://botpress.com',\n    experimental: true\n  }\n}\nexport default entryPoint\n\n// TODO add a kmean like pairwise intent\n"]}